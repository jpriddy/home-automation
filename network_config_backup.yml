---
- name: Backup Network Configs
  hosts: all
  gather_facts: no
  tasks:

  - name: "Starting ROS System Backup"
    community.routeros.command:
        commands: 
          - /system backup save name {{inventory_hostname}}

  - name: "Starting ROS Configuration Backup"
    community.routeros.command:
        commands: 
          - /export show-sensitive file={{inventory_hostname}}

  - name: "Grabbing backup and storing on synology"
    ansible.netcommon.net_get:
        src: "inventory_hostname.backup"
        dest: "/synology/backup/mikrotik_config_backups/inventory_hostname.backup"

  - name: "Grabbing rsc and storing on synology"
    ansible.netcommon.net_get:
        src: "inventory_hostname.rsc"
        dest: "/synology/backup/mikrotik_config_backups/inventory_hostname.rsc"